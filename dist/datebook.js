!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.datebook=e():t.datebook=e()}(global,(function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(o,r,function(e){return t[e]}.bind(null,r));return o},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e){var n,o,r;o=[],void 0===(r="function"==typeof(n=function(){"use strict";function e(t,e,n){var o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){c(o.response,e,n)},o.onerror=function(){console.error("could not download file")},o.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,c=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype?function(t,c,i){var u=r.URL||r.webkitURL,a=document.createElement("a");c=c||t.name||"download",a.download=c,a.rel="noopener","string"==typeof t?(a.href=t,a.origin===location.origin?o(a):n(a.href)?e(t,c,i):o(a,a.target="_blank")):(a.href=u.createObjectURL(t),setTimeout((function(){u.revokeObjectURL(a.href)}),4e4),setTimeout((function(){o(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,r,c){if(r=r||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,c),r);else if(n(t))e(t,r,c);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout((function(){o(i)}))}}:function(t,n,o,c){if((c=c||open("","_blank"))&&(c.document.title=c.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,o);var i="application/octet-stream"===t.type,u=/constructor/i.test(r.HTMLElement)||r.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&u)&&"object"==typeof FileReader){var f=new FileReader;f.onloadend=function(){var t=f.result;t=a?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=t:location=t,c=null},f.readAsDataURL(t)}else{var s=r.URL||r.webkitURL,l=s.createObjectURL(t);c?c.location=l:location.href=l,c=null,setTimeout((function(){s.revokeObjectURL(l)}),4e4)}});r.saveAs=c.saveAs=c,t.exports=c})?n.apply(e,o):n)||(t.exports=r)},function(t,e,n){"use strict";function o(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,e){for(var n,o=0;o<e.length;o++)(n=e[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(t,e){return!e||"object"!==Y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.r(e),n.d(e,"CalendarBase",(function(){return C})),n.d(e,"GoogleCalendar",(function(){return W})),n.d(e,"YahooCalendar",(function(){return K})),n.d(e,"OutlookCalendar",(function(){return X})),n.d(e,"ICalendar",(function(){return Q}));var S={DAILY:"DAILY",WEEKLY:"WEEKLY",MONTHLY:"MONTHLY",YEARLY:"YEARLY"},M="YYYYMMDD",_="https://calendar.yahoo.com/",P="https://calendar.google.com/calendar/render",k="https://outlook.live.com/calendar/0/deeplink/compose",A=function(t){return"0".concat(parseInt(t,10)).slice(-2)},L=function(t,e){var n={YYYY:t.getFullYear(),MM:A(t.getMonth()+1),DD:A(t.getDate()),hh:A(t.getHours()),mm:A(t.getMinutes()),ss:A(t.getSeconds())};return Object.keys(n).reduce((function(t,e){return t.replace(e,n[e])}),e)},x=function(t){return new Date(t)},N=function(t,e){return L(x(t),e)},C=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.setText(e),this.setTimestamps(e)}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(t,[{key:"setText",value:function(t){this.description=t.description||"",this.title=t.title||"",this.location=t.location||""}},{key:"setTimestamps",value:function(t){this.allday=!t.end,this.allday?(this.end=x(t.start),this.end.setDate(this.end.getDate()+1)):this.end=x(t.end),this.start=x(t.start),this.recurrence=t.recurrence}}]),t}(),I=function(t){return t},U=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:";",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:I,o=[];for(var r in t)t.hasOwnProperty(r)&&void 0!==t[r]&&o.push("".concat(r,"=").concat(n(t[r])));return o.join(e)},B=function(t){return U(t,"&",encodeURIComponent)},H=n(0),V=n.n(H),q=function(t){return t?t.replace(/\n/g,"\\n"):""},F=function(t){var e={FREQ:"frequency",INTERVAL:"interval",COUNT:"count",WKST:"weekStart",BYDAY:"weekdays",BYMONTHDAY:"monthdays"},n=Object.keys(e).filter((function(n){return t.hasOwnProperty(e[n])})).reduce((function(n,o){return n[o]=t[e[o]],n}),{});return t.end&&(n.UNTIL=N(new Date(t.end),"YYYYMMDDThhmmss")),function(t){return U(t,";")}(n)},G=function(t,e){var n=function(t){return t?"".concat(t.replace(/[^\w ]/g,""),".ics"):"event.ics"}(t);if(window.hasOwnProperty("safari"))!function(t,e){var n=document.createElement("a"),o=encodeURIComponent(t);if(n.setAttribute("href","data:text/calendar;charset=utf-8,".concat(o)),n.setAttribute("download",e),document.createEvent){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0),n.dispatchEvent(r)}else n.click()}(e,n);else{var o=function(t){return new Blob([t],{type:"application/octet-stream"})}(e);V.a.saveAs(o,n)}},W=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n.call(this,t)}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(e,t);var n=function(t){return function(){var e,n=f(t);if(a()){var o=f(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return u(this,e)}}(e);return function(t,e,n){e&&c(t.prototype,e),n&&c(t,n)}(e,[{key:"render",value:function(){var t="YYYYMMDD";this.allday||(t+="Thhmmss");var e={action:"TEMPLATE",text:this.title,details:this.description,location:this.location,dates:[N(this.start,t),N(this.end,t)].join("/")};this.recurrence&&(e.recur="RRULE:".concat(F(this.recurrence)));var n=P,o=B(e);return"".concat(n,"?").concat(o)}}]),e}(C),K=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o.call(this,t)}var n=Math.floor;!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,t);var o=function(t){return function(){var e,n=h(t);if(d()){var o=h(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return y(this,e)}}(e);return function(t,e,n){e&&l(t.prototype,e),n&&l(t,n)}(e,[{key:"formatDay",value:function(t){var e=t.charAt(0),n=t.charAt(1).toLowerCase();return"".concat(e).concat(n)}},{key:"getFrequency",value:function(t){var e=t.frequency,n=t.weekdays,o=S;return n?n.split(",").map(this.formatDay).join(""):e===o.DAILY?"Dy":e===o.MONTHLY?"Mh":e===o.YEARLY?"Yr":"Wk"}},{key:"getRecurrence",value:function(t){var e=this.getFrequency(t),n=t.interval;return"".concat(A(n)).concat(e)}},{key:"getDuration",value:function(t,e){var o=n((e-t)/1e3),r=n(o/3600);return"".concat(A(r)).concat(A(o/3600%1*60))}},{key:"getHoursDuration",value:function(t,e){var o=n((e-t)/1e3);return n(o/3600)}},{key:"render",value:function(){var t={v:60,title:this.title,desc:this.description,in_loc:this.location};this.allday?(t.dur="allday",t.st=N(this.start,"YYYYMMDD")):(t.st=N(this.start,"YYYYMMDDThhmmss"),99<this.getHoursDuration(this.start,this.end)?t.et=N(this.end,"YYYYMMDDThhmmss"):t.dur=this.getDuration(this.start,this.end)),this.recurrence&&(t.RPAT=this.getRecurrence(this.recurrence),t.REND=this.recurrence.end?N(this.recurrence.end,"YYYYMMDD"):N(this.end,"YYYYMMDD"));var e=_,n=B(t);return"".concat(e,"?").concat(n)}}]),e}(C),X=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n.call(this,t)}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(e,t);var n=function(t){return function(){var e,n=O(t);if(g()){var o=O(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return w(this,e)}}(e);return function(t,e,n){e&&v(t.prototype,e),n&&v(t,n)}(e,[{key:"render",value:function(){var t="YYYY-MM-DD";this.allday||(t+="Thh:mm:ss");var e={path:"/calendar/action/compose",rru:"addevent",startdt:N(this.start,t),enddt:N(this.end,t),subject:this.title,body:this.description,location:this.location,allday:this.allday},n=k,o=B(e);return"".concat(n,"?").concat(o)}}]),e}(C),Q=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n.call(this,t)}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}(e,t);var n=function(t){return function(){var e,n=T(t);if(j()){var o=T(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return E(this,e)}}(e);return function(t,e,n){e&&D(t.prototype,e),n&&D(t,n)}(e,[{key:"download",value:function(){G(this.title,this.render())}},{key:"render",value:function(){var t=q(this.description),e=q(this.location),n=q(this.title),o=["CLASS:PUBLIC","DESCRIPTION:".concat(t),"DTSTART:".concat(N(this.start,"YYYYMMDDThhmmss")),"DTEND:".concat(N(this.end,"YYYYMMDDThhmmss")),"LOCATION:".concat(e),"SUMMARY:".concat(n),"TRANSP:TRANSPARENT"];this.recurrence&&o.push("RRULE:".concat(F(this.recurrence)));var r=Math.random().toString(36).substr(2),c=L(new Date,M),i="undefined"==typeof window?"datebook":window.location.host;return["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT",o.join("\n"),"END:VEVENT","END:VCALENDAR","UID:".concat(r),"DTSTAMP:".concat(c),"PRODID:".concat(i)].join("\n")}}]),e}(C)}])}));